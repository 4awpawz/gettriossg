<!DOCTYPE html>
<html lang="en">

<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-67538650-3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'UA-67538650-3');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="description" content="Fast, simple yet powerful JavaScript-driven static site generation.">
    <meta name="author" content="Jeffrey Schwartz">
    <meta name="generator" content="Trio v6.1.0">
    <meta name="twitter:creator" content="@jefftschwartz">
    <meta name="twitter:site" content="@gettriossg">
    <meta name="twitter:card" content="summary_large_image">
    <meta property="og:image" content="https://gettriossg.com/media/trio-social-media-image.76c410f98336b312b96fd6756143d668.png">
    <meta property="og:url" content="https://gettriossg.com/docs/v6/collections/">
    <meta property="og:description" content="Collections">
    <meta property="og:title" content="Collections">
    <meta property="og:type" content="article">
    <title>Collections - Trio</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.png">
    <link href="https://fonts.googleapis.com/css?family=Lora|Open+Sans" rel="stylesheet">
    <link rel="stylesheet" href="/css/libs/highlight/github.bf6c14925e66edb1526b6c9489b3c042.css">
    <link rel="stylesheet" href="/css/main.5e717d2d827c90267a43d11d2920899c.css">
    <script src="/scripts/highlight.e497281e462342b50ccbb59b462856dd.pack.js"></script>
    <script>
        hljs.initHighlightingOnLoad();
    </script>
</head>

<body>
    <header class="header header--fixed header--green">
        <section class="container header__container">
            <input class="hamburger-checkbox header__hamburger-checkbox" type="checkbox" id="hamburger-checkbox" autocomplete="off">
            <label class="hamburger-helper header__hamburger-container" for="hamburger-checkbox">
                <div class="hamburger">
                    <div class="hamburger__bun">
                        <div class="hamburger__patty"></div>
                        <div class="hamburger__patty"></div>
                        <div class="hamburger__patty"></div>
                    </div>
                </div>
            </label>
            <div class="header__promo">
                <img class="header__promo-image" src="/media/brand.b66d421676dcc7ac68959fd41c82c140.svg" alt="Trio Icon">
                <div class="header__promo-text">T<span class="header__promo-text-smallcaps">rio</span>
                    <span class="header__promo-text-version">v6.1.0</span>

                </div>
            </div>
            <nav class="header__nav">
                <ul class="header__nav-items">
                    <li class="header__nav-item">
                        <a class="header__nav-item-link" href="/">Home</a>
                    </li>
                    <li class="header__nav-item header__nav-item--active">
                        <a class="header__nav-item-link" href="/docs/v6/">Docs</a>
                    </li>
                    <li class="header__nav-item">
                        <a class="header__nav-item-link" href="/blog">Blog</a>
                    </li>
                </ul>
            </nav>
        </section>
    </header>
    <main class="container doc-page">
        <aside class="doc-page-index">
            <h2 class="doc-page-index__header">T<span class="doc-page-index__header-smallcaps">rio</span> <span class="doc-page-index__header-version">v6.1.0</span></h2>
            <aside class="doc-page-index__list-container">
                <ul class="doc-page-index__list">
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/upgrading">Upgrading</a>
                        <div class="line"></div>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6">About</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/gettingstarted">Getting Started</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/coreconcepts">Core Concepts</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/projectstructure">Project Structure</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/pagegeneration">Page Generation</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/linkingconventions">Linking Conventions</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/frontmatter">Front Matter</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/tagattributes">Tag Attributes</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/template">Template</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/fragment">Fragment</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/include">Include</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/jsondata">JSON Data</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/metadata">Metadata</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/tagbasedcallbacks">Tag-Based Callbacks</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/scsssasscss">SCSS/SASS/CSS</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/blogging">Blogging</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link doc-page-index__list-item-link--current" href="/docs/v6/collections">Collections</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/permalinks">Permalinks</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/commandline">Command Line</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/incrementalbuild">Incremental Build</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/configuration">Configuration</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/additionalresources">Additional Resources</a>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="/docs/v6/faq">FAQ</a>
                        <div class="line"></div>
                    </li>
                    <li class="doc-page-index__list-item">
                        <a class="doc-page-index__list-item-link" href="https://github.com/4awpawz/trio">Github Repo &amp; Issue Tracker</a>
                    </li>
                </ul>

            </aside>
        </aside>
        <article class="doc-page-content">
            <section class="notification">Documentation is evolving and is a WIP</section>
            <section class="doc-page-content__copy">
                <h1>Collections</h1>

                <p><mark>Introduced in v2.0.0</mark></p>

                <p>Collections are groups of pages that are dynamically generated by Trio that you would otherwise have to manually create yourself.</p>

                <p>As an example, let&apos;s imagine that you have a team website which includes a page that lists all the team members. Information about each team member is maintained in a file named <em>root/source/data/team.json</em>. You would now like to create a detail page for every team member and render those pages when someone clicks on one of the team members in the list.</p>

                <p>Without collections, you would have to manually create one fragment for each team member&apos;s detail page. If there are only a few team members then that wouldn&apos;t be too difficult. Suppose, however, there are dozens of, if not more, team members and how tedious it would be to have to manually create and maintain all those fragments.</p>
                <p>

                </p>
                <p>That&apos;s where collections come to the rescue; they do all the &quot;heavy lifting&quot; for you. You only need to create one <a href="#collection-fragments">fragment</a> whose front matter declares one collection <a href="#collection-filter-functions">filter function</a> that when called by Trio returns a <a href="#collection-datasets">collection dataset</a>, which is an array that contains one collection dataset item for each member of the team. Trio will then create a &quot;clone&quot; of that fragment <em>in memory</em> for every collection dataset item and will expose the collection dataset item&apos;s properties for that cloned fragment to tag-based callbacks via the callback&apos;s <em>asset</em> argument, specifically as the <em>asset.collection.data</em> property.</p>

                <h2 id="collection-fragments">Implementing Collection Fragments</h2>
                <p>To create a collection, add a <em>collection hash</em> to a fragment&apos;s front matter and assign its <em>filterFn</em> property the name of a filter function located in the <em>/source/filters</em> folder.</p>

                <figure>
                    <pre><code class="html">&lt;!--
template: default
title: Member |
appendToTarget: true
<mark>collection:
    filterFn: member</mark>
--&gt;

&lt;div <mark>data-trio-callback=&quot;teamMember&quot;</mark>&gt;
    &lt;h1&gt;&lt;u&gt;Team Member&lt;/u&gt;&lt;/h1&gt;
    &lt;h2 id=&quot;name&quot;&gt;Name: &lt;/h2&gt;
    &lt;h2 id=&quot;title&quot;&gt;Title: &lt;/h2&gt;
    &lt;p id=&quot;bio&quot;&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;a href=&quot;/&quot;&gt;Main Page&lt;/a&gt;</code></pre>
                    <figcaption>Example: Fragment Used To Generate A Collection</figcaption>
                </figure>

                <blockquote class="note-tip">
                    <p>You can also add <em>custom properties</em> to the collection hash which will be accessible in your collection&apos;s filter function.</p>
                </blockquote>

                <blockquote class="note-tip">
                    <p>Fragments that declare collections in their front matter are always treated as <em>stale</em> and therefore do not need to be marked with <em>alwaysBuild</em>.</p>
                </blockquote>

                <h2 id="collection-datasets">Collection Datasets</h2>

                <p>Collection datasets are arrays of collection dataset items that <a href="#collection-filter-functions">collection filter functions</a> return. Each collection dataset item in a collection dataset represents a single page of the collection. The total number of collection dataset items in a collection dataset determines the total number of pages that Trio will generate for the collection.</p>

                <h2 id="collection_dataset_item_properties">Collection Dataset Item Properties</h2>

                <p>Each collection dataset item in a collection dataset must include the following properties:</p>

                <h3>pageName</h3>

                <p>The name that will be used for the page, which may also include a path.</p>

                <p>Trio uses the value that you assign to <em>pageName</em> for generating the path in the <em>root/source/fragments/</em> folder that the &quot;cloned&quot; fragment would be located in if it were actually written to disk. This allows Trio to treat the <em>in memory only &quot;cloned&quot; fragment</em> as if it actually was a physical file.</p>

                <p>Trio uses the following algorithm to generate the path: <em>path to the fragment in which the collection is declared</em> + <em>collectionDatasetItem.pageName</em> + <em>the file name extension of the fragment (either .html or .md) in which the collection is declared</em>.</p>

                <h3 id="data">data</h3>

                <p>The data that is intended to be exposed to the composite&apos;s <a href="#tag-based-callbacks">tag-based callbacks</a>, which can be accessed to add dynamic content to the page. Using the team website for an example, the <em>data</em> property would be assigned a single item from the <em>root/source/data/team.json</em> file.</p>

                <blockquote class="note-important">
                    <p>Prior to v3, you were able to name this property anything as long as it adhered to JavaScript&apos;s object property naming conventions. However, this ambiguity prevented Trio from validating each dataset item. To remedy this, beginning with v3, Trio requires that this must now be named &quot;data&quot;.</p>
                </blockquote>
                <blockquote class="note-tip">
                    <p>You can use any of the data that is exposed by the <a href="/docs/v6/metadata#site">metadata site</a> object.</p>
                </blockquote>
                <blockquote class="note-tip">
                    <p>You can add your own <em>custom properties</em> to collection dataset items and they will be accessible in the composite&apos;s tag-based callbacks also.</p>
                </blockquote>

                <h2 id="collection-filter-functions">Implementing Collection Filter Functions</h2>
                <p>Each module must export a single function which, when called by Trio, is passed a single argument</p>
                <pre><code>{ collection, site }</code></pre>

                <p>which can be <em>destructured</em> (see <a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#Unpacking_fields_from_objects_passed_as_function_parameter">Unpacking fields from objects passed as function parameter </a> for more information)</p>
                <pre><code>({ collection, site })</code></pre>
                <p> to access its properties:</p>
                <h3>site</h3>
                <p>site exposes the organized collection of <a href="/docs/v6/metadata#site">metadata</a> that Trio creates from your project&apos;s assets. Its catalogs - <a href="/docs/v6/metadata#frags">frags</a>, <a href="/docs/v6/metadata#articles-catalog">articlesCatalog</a>, <a href="/docs/v6/metadata#categories-catalog">categoriesCatalog</a>, <a href="/docs/v6/metadata#tags-catalog">tagsCatalog</a>, <a href="/docs/v6/metadata#data-catalog">dataCatalog</a> - as well as its other properties can all be used to create a collection dataset.</p>
                <h3>collection</h3>
                <p>collection is a reference to the fragment&apos;s front matter&apos;s <a href="#collection-fragments">collection hash</a>.</p>

                <blockquote class="note-important">
                    <p>Filter functions are called <em>synchronously</em>.</p>
                </blockquote>

                <blockquote class="note-tip">
                    <p>Trio uses <em>import-fresh</em> internally to import uncached collection filter functions.</p>
                </blockquote>

                <figure>
                    <pre><code class="javascript">module.exports = ({ <mark>site</mark>, <mark>collection</mark> }) =&gt;
    site.dataCatalog.team.map(<mark>item</mark> =&gt;
        ({ <mark>pageName</mark>: `${item.firstName} ${item.lastName}`, <mark>data</mark>: item }));</code></pre>
                    <figcaption>Example: Filter Function Returning A Collection Dataset</figcaption>
                </figure>

                <h2>Importing Uncached Internal Module Dependencies</h2>

                <p>When your filter functions have their own internal module dependencies, you should import those dependencies using <a target="_blank" href="https://www.npmjs.com/package/import-fresh"><em>import-fresh</em></a> (or some similar package) to guarantee that you are always importing fresh, uncached copies of them and they reflect your most recent changes.</p>

                <figure>
                    <pre><code class="JavaScript"><mark>const importFresh = require(&apos;import-fresh&apos;);</mark>
<mark>const pageName = importFresh(&quot;./lib/pageName&quot;);</mark>
module.exports = ({ site, collection }) =&gt;
    site.dataCatalog.team.map(item =&gt;
        ({ pageName: `${<mark>pageName</mark>(item.firstName, item.lastName)}`, <mark>data</mark>: item }));</code></pre>
                    <figcaption>Example: Filter Function Importing Uncached Module Dependency</figcaption>
                </figure>

                <h2 id="tag-based-callbacks">Tag-Based Callbacks</h2>

                <p>The following properties, including those from the <em>collection dataset item</em>, are exposed to tag-based callbacks via the <a href="/docs/v6/metadata#collection">asset.collection</a> property:</p>

                <h3>asset.collection.pageName</h3>
                <p>The name of this page that was assigned to the collection dataset item&apos;s <em>pageName</em> property.</p>
                <p>See <a href="#collection_dataset_item_properties">dataset item data properties</a> above.</p>

                <h3>asset.collection.data</h3>
                <p>The data that was assigned to the collection dataset item&apos;s <em>data</em> property.</p>
                <p>See <a href="#collection_dataset_item_properties">dataset item data properties</a> above.</p>

                <h3>asset.collection.index</h3>
                <p>The zero-based index of the collection dataset item that contributed its data to this page.</p>

                <h3>asset.collection.totalItems</h3>
                <p>The total number of collection dataset items in the collection dataset.</p>

                <blockquote class="note-tip">
                    <p>In addition to the above properties, any custom properties that you add to collection dataset items are also accessible.</p>
                </blockquote>

                <figure>
                    <pre><code class="javascript">module.exports = ({ $tag, <mark>asset</mark> }) =&gt; {
    const data = <mark>asset.collection.data</mark>;
    $tag.find(&quot;#name&quot;).append(`${data.firstName} ${data.lastName}`);
    $tag.find(&quot;#title&quot;).append(data.title);
    $tag.find(&quot;#bio&quot;).append(data.bio);</code></pre>
                    <figcaption>Example: /source/callbacks/teamMember.js Tag-Based Callback Function</figcaption>
                </figure>

                <h2>Demo</h2>

                <p>A demo collections project is available on Github that you can copy, build, run and examine.</p>

                <ul>
                    <li><a target="_blank" href="https://github.com/4awpawz/team-members-collection">Demo Collections Repo</a></li>
                    <li><a target="_blank" href="https://4awpawz.github.io/team-members-collection-pages/">Demo Collections Live</a></li>
                </ul>

                <h2>See Also</h2>

                <ul>
                    <li><a href="/docs/v6/fragment">Fragment</a></li>
                    <li><a href="/docs/v6/metadata">Metadata</a></li>
                    <li><a href="/docs/v6/tagbasedcallbacks">Tag-Based Callbacks</a></li>
                </ul>
            </section>
            <footer class="docfooter footer--hide-the-love">
                <p class="show-the-love">&quot;Built with <span class="heart">&#x2665;</span> for the Web, and a passion for simplifying complex things.&quot;</p>

                <p>&#xA9;<span>2018-2021</span> Jeffrey Schwartz All Rights Reserved</p>

                <p>Code licensed <a target="_blank" href="https://github.com/4awpawz/trio/blob/master/LICENSE">MIT</a>, docs <a target="_blank" href="https://creativecommons.org/licenses/by/3.0/">CC By 3.0</a></p>

                <p>Currently <span>v6.1.0</span></p>

                <p><a href="https://github.com/4awpawz/trio#changelog" target="_blank">Changelog</a></p>

            </footer>
        </article>
    </main>
    <script src="/scripts/main.js"></script>
</body>

</html>